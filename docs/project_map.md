# Project map

## 1) Роли и возможности (по проекту)

Ниже — карта функциональности по ролям, как это реализовано в GUI (Qt Widgets) и слое данных (`Database`).

### Admin
- Управление пользователями:
  - просмотр списка пользователей
  - фильтрация по роли (admin/teacher/student)
  - поиск пользователя
  - добавление пользователя (логин/пароль/ФИО/роль + группа/подгруппа для student)
  - редактирование пользователя
  - удаление пользователя (с проверками зависимостей)
- Управление расписанием:
  - просмотр расписания по группе
  - просмотр расписания по преподавателю
  - выбор периода (неделя цикла 1..4) через `PeriodSelectorWidget`
  - добавление/редактирование/удаление записи расписания (предмет/преподаватель/аудитория/тип занятия)
  - проверки конфликтов (занятость преподавателя/аудитории/слота)
- Генерация/рандомизация (D1):
  - генерация/перегенерация расписания/данных для группы/семестра (по UI наличию вкладки D1)

**Подтверждение в коде:** `adminwindow.h/.cpp`, методы `Database` (users/schedule/teacher assignments).

### Teacher
- Просмотр своего расписания на выбранный период:
  - выбор группы/подгруппы и периода (через `PeriodSelectorWidget`, `WeekGridScheduleWidget`)
- Журнал:
  - выбор урока/пары
  - выбор студента
  - выставление/редактирование оценки
  - внесение/редактирование пропусков (часы + тип)
- Статистика по группе:
  - агрегированные таблицы/сводки по оценкам и пропускам
  - детализация по студенту

**Подтверждение в коде:** `teacherwindow.h/.cpp`, `Database` методы journal helpers: `upsertGradeByKey`, `upsertAbsenceByKey`, `findGradeId`, `findAbsenceId`, `getScheduleForTeacherWeekWithRoom`, и т.п.

### Student
- Просмотр расписания:
  - выбор периода (неделя цикла)
  - отображение расписания на неделю
  - просмотр «карточек» занятий (предмет/тип/аудитория/преподаватель)

Дополнительно (по проекту в целом):
- Просмотр оценок/среднего балла (страницы успеваемости)
- Просмотр пропусков (страницы отсутствий)

**Подтверждение в коде:** `studentwindow.h/.cpp`, страницы `ui/pages/*`, `Database` методы выборок.

## 2) Основные окна/вкладки (GUI)

### LoginWindow
- Ввод `username/password`
- Проверка пользователя через `Database::findUser`
- Открывает нужное окно по роли:
  - `StudentWindow`
  - `TeacherWindow`
  - `AdminWindow`

**Файлы:** `loginwindow.h/.cpp`

### AdminWindow
- Вкладка Users (управление пользователями)
- Вкладка Schedule (расписание)
- Вкладка D1 Randomizer (генератор/рандомизатор)

**Файлы:** `adminwindow.h/.cpp`

### TeacherWindow
- Вкладка Schedule
- Вкладка Journal
- Вкладка Group stats

**Файлы:** `teacherwindow.h/.cpp`

### StudentWindow
- Вкладка расписания
- Доп. страницы для оценок/пропусков (через компоненты `ui/pages/*`)

**Файлы:** `studentwindow.h/.cpp`, `ui/pages/*`, `ui/widgets/*`

## 3) Технологии
- **C++**
- **Qt 6 Widgets** (GUI)
- **SQLite** (файловая БД)
- **CMake** (сборка)
- **third_party/sqlite**: вендоренный `sqlite3.c/.h`

## 4) Данные / демонстрационные SQL
- Скрипты загрузки расписаний:
  - `schedule_420601_newest.sql`
  - `schedule_420602_newest.sql`
  - `schedule_420603_newest.sql`
  - `schedule_420604_newest.sql`
- База данных (файл): `school.db`

**Файлы/логика:** `main.cpp` (инициализация БД и загрузка расписаний при пустой schedule), `database.cpp`.

## 5) Ограничения проекта (для записки)
- Проект ориентирован на **GUI (Qt Widgets)**.
- **Консольная версия не входит в сдачу** (удалена/выведена из сборки).
- Хранение данных — локальная **SQLite БД в файле**, без серверной части.
- Офлайн-режим: приложение работает локально.
